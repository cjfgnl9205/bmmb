<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="spring.model.mapper.SampleMapper">

	<select id="total" parameterType="Map" resultType="int">
		SELECT count(*) FROM sampleEbook
		<where>
			sampleID LIKE '%'||#{word}||'%'
			OR
			ebook_ID LIKE '%'||#{word}||'%'
		</where>
	</select>

	<select id="list" parameterType="Map" resultType="SampleDTO">
		SELECT sampleID, ebook_ID, page1, page2, page3, page4, page5, spage,  r
		FROM(
			SELECT sampleID, ebook_ID, page1, page2, page3, page4, page5, spage, rownum r
			FROM(
				SELECT sampleID, ebook_ID, page1, page2, page3, page4, page5, spage from sampleEbook
				<where>
					sampleID LIKE '%'||#{word}||'%'
					OR
					ebook_ID LIKE '%'||#{word}||'%'
				</where>
				ORDER BY sampleID DESC
			)
		)
		<![CDATA[
			WHERE r>=#{sno} AND r<=#{eno}
		]]>
	</select>

</mapper>